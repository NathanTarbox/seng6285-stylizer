{% extends 'base.html' %}

{% block title %}Image styling via Machine Learning{% endblock %}

{% block main %}

<div class="container">
  <form action="set-id" method="post">
    <label for="uid">Retrieval ID</label>
    <input type="text" name="newuid" id="newuid" value="{{uid}}" required>
    <label for="secret">Retrieval Key</label>
    <input type="text" name="secret" id="secret" value="{{secret}}" required>
    <button class="btn btn-primary btn-lg" type="submit">Change</button>
  </form>
</div>


<div class="container">
  
  <h2>Images created:</h2>
  <table class="table table-hover" style="border: 1px solid black">
    <thead class="thead-dark">
      <tr><th>Image Name</th><th>Style</th><th>View</th></tr>
    </thead>
    {% for image in images %}
    <tr>
      <td>{{image['name']}}</td>
      <td>{{image['style']}}</td>
      <td>
        {% if 'url' not in image.keys() or image['url'] is none %}
        Processing. . . 
        {% else %}
        <a href="{{image['url']}}" target="_blank">View</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
  <br>
  <a class="btn btn-outline-primary btn-lg btn-block" href="{{ url_for('style_new') }}">Stylize a new image</a>
  </div>

  {% if codes %}
  <h2>Images created:</h2>
  <ul>
    {% for code in codes %}
    <a href="{{ url_for('redirect_to_url', code=code) }}">
      <li>{{ code }}</li>
    </a>
    {% endfor %}
  </ul>
  {% endif %}
</div>

{% endblock %}
